self.System=self.System||(()=>{const e={},t={},s=e=>e.replace(/^.\/(\w+)-[a-f0-9]{8,}.js$/,"./$1.js"),n={register(o,c){const a=s(`./${((document.currentScript||{}).src||"").split("?").shift().split("/").pop()}`),r={},i=c((e,t)=>t?r[e]=t:Object.assign(r,e),n);e[a]=Promise.all(o.map((e,t)=>n.import(s(e)).then(i.setters[t]))).then(()=>(i.execute(),r)).catch(e=>{throw e.message=`evaluating module ${a}: ${e.message}`,e}),t[a]&&(t[a](e[a]),delete t[a])},import:s=>e[s]||(e[s]=new Promise((e,n)=>{const o=setTimeout(()=>{n(new Error(`could not resolve ${s}`))},1e4);t[s]=(t=>{clearTimeout(o),e(t)})}))};return n})(),System.register(["./frameworks.js"],function(e,t){"use strict";var s,n,o,c,a,r,i,l,u,d,m,f,g,p,j,h,L,y,b,v;return{setters:[function(e){s=e.a,n=e.e,o=e.b,c=e.q,a=e.o,r=e.f,i=e.h,l=e.l,u=e.c,d=e.g,m=e.r,f=e.s,g=e.m,p=e.t,j=e.u,h=e.v,L=e.w,y=e.x,b=e.y,v=e.z}],execute:function(){function e(e,t){for(const s of document.querySelectorAll(".js-setting-toggle .js-status-indicator"))s.classList.remove("status-indicator-success","status-indicator-loading","status-indicator-failed");e.classList.add(t)}async function t(e){if(!e)return;const t=e.getAttribute("data-url");if(!t)return;let s;try{s=await d(document,t),e.innerHTML="",e.append(s)}catch(n){window.location.reload()}}function k(e,t){const s=n(t,".js-repo-access-error");s.textContent=e,s.classList.remove("d-none")}function w(){for(const e of document.querySelectorAll(".js-repo-access-error"))e.textContent="",e.classList.add("d-none")}function T(e){const t=e.querySelectorAll(".js-repo-access-entry").length,s=parseInt(n(e,".js-collab-limit",HTMLElement).getAttribute("data-collab-limit"),10),o=n(e,".js-over-limit",HTMLElement),c=n(e,".js-under-limit",HTMLElement);e.classList.toggle("is-empty",0===t),o.classList.toggle("d-none",t<s),c.classList.toggle("d-none",t>=s)}s(".js-email-global-unsubscribe-form",function(e){n(e,".js-email-global-unsubscribe-submit",HTMLInputElement).disabled=!0}),o("change",".js-email-global-unsubscribe-form",function(e){const t=e.currentTarget,s=n(t,".js-email-global-unsubscribe-submit",HTMLInputElement),o=c(t,".js-email-global-unsubscribe",HTMLInputElement),a=Array.from(o).some(e=>e.checked!==e.defaultChecked);s.disabled=!a}),a(".js-email-unsubscribe-form",async function(e,t){await t.text();for(const s of document.querySelectorAll(".js-email-unsubscribe-message"))s.hidden=!s.hidden}),a(".js-setting-toggle",async function(t,s){const o=n(t,".js-status-indicator");e(o,"status-indicator-loading");try{await s.text()}catch(c){e(o,"status-indicator-failed")}e(o,"status-indicator-success")}),o("change",".js-toggle-email-settings input",function(){const e=n(document,".js-notification-emails"),t=document.querySelector(".js-toggle-email-settings input:checked");e.classList.toggle("d-none",!t)}),a(".js-revoke-access-form",async function(e,t){await t.html();const s=r(e,"data-id"),o=r(e,"data-type-name"),c=n(document,`.js-revoke-item[data-type='${o}'][data-id='${s}']`);c.remove(),c.classList.contains("new-token")&&n(document,".js-flash-new-token").remove()}),o("click",".js-delete-oauth-application-image",function(){const e=n(document,".js-delete-oauth-application-image-form",HTMLFormElement);i(e)}),o("click",".js-new-callback",function(e){e.preventDefault();const t=e.currentTarget,s=l(t,".js-callback-urls"),o=n(s,".js-callback-url").cloneNode(!0);o.classList.remove("is-default-callback"),n(o,"input",HTMLInputElement).value="",s.classList.add("has-many");const c=t.parentNode;u(c instanceof HTMLElement,"null.js:43"),c.insertBefore(o,t)}),o("click",".js-delete-callback",function(e){e.preventDefault();const t=e.currentTarget;l(t,".js-callback-url").remove();const s=l(t,".js-callback-urls");c(s,".js-callback-url",HTMLElement).length<=1&&s.classList.remove("has-many")}),o("click",".js-oauth-application-whitelist .js-deny-this-request",function(e){const t=e.currentTarget,s=t.nextElementSibling;u(s instanceof HTMLInputElement,"null.js:65"),s.value="denied",i(l(t,".js-org-application-access-form",HTMLFormElement))}),o("click",".js-generate-integration-key",function(){const e=n(document,".js-integration-key-management-wrapper");e.classList.add("downloading"),e.classList.contains("js-integration-key-multi")&&(e.classList.add("has-keys"),setTimeout(function(){const e=n(document,".js-integration-keys-container",HTMLElement);e&&t(e)},1e3))}),a(".js-remove-integration-key",async function(e,s){try{await s.text()}catch(a){if(!a.response)throw a;l(e,"details").removeAttribute("open");const t=n(document,".js-integration-key-management-wrapper"),s=n(t,".js-error-container"),o=n(s,".js-error-message");switch(a.response.status){case 500:o.textContent="Oops, something went wrong.";break;case 404:o.textContent="Oops, that key could not be found.";break;default:o.textContent=a.response.json.message}return void t.classList.add("error")}const o=r(e,"data-key-id"),c=document.getElementById(o);if(c){const e=l(c,".js-integration-keys-container",HTMLElement);e&&t(e)}}),o("click",".js-error-dismiss",function(){const e=n(document,".js-integration-keys-container",HTMLElement);e&&t(e)}),o("change",".js-checkbox-scope",function(e){const t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:149");const s=l(t,".js-check-scope-container"),n=c(s,".js-checkbox-scope",HTMLInputElement);for(const o of n)o!==t&&(o.checked=t.checked,o.disabled=t.checked)});function E(e){const t=n(e,".js-authorized-pushers");if(!t.getAttribute("data-limit"))return;const s=parseInt(t.getAttribute("data-limit")),o=t.querySelectorAll(".js-authorized-user-or-team").length;t.classList.toggle("at-limit",o>=s)}function H(e,t,s){if(!s){const s=e.getAttribute(t);if(!s)return;return JSON.parse(s)}e.setAttribute(t,JSON.stringify(s))}function M(e){const t=H(n(document,".js-add-u2f-registration-form",HTMLFormElement),"data-sign-requests",e);return t||[]}function q(e){const t=H(n(document,".js-add-u2f-registration-form",HTMLFormElement),"data-register-requests",e);return t||[]}function S(e){e.register_requests&&q(e.register_requests),e.sign_requests&&M(e.sign_requests)}function A(e,t){const s=n(document,".js-new-u2f-registration");s.classList.add("is-showing-error"),s.classList.remove("is-sending");for(const n of s.querySelectorAll(".js-u2f-error"))n.classList.add("d-none");const o=n(s,e);t&&(o.textContent=t),o.classList.remove("d-none")}async function I(e){if(!(await p("high")))throw new Error("sudo failed");const t=n(document,".js-add-u2f-registration-form",HTMLFormElement);j(t,"response").value=JSON.stringify(e);try{const e=await h(t.action,{method:t.method,body:new FormData(t)});S(e),n(document,".js-new-u2f-registration").classList.remove("is-sending","is-active"),n(document,".js-u2f-registration-nickname-field",HTMLInputElement).value="",e.registration&&function(e){const t=document.createElement("div");t.innerHTML=e;const s=t.firstChild;null!=s&&n(document,".js-u2f-registrations").appendChild(s)}(e.registration)}catch(s){if(s.response){const e=await s.response.json();S(e),A(".js-u2f-server-error",e.error)}else A(".js-u2f-network-error")}}async function x(){const e=n(document,".js-new-u2f-registration");e.classList.add("is-sending"),e.classList.remove("is-showing-error");const t=n(document,".js-add-u2f-registration-form"),s=r(t,"data-app-id");try{const e=await L(s,q(),M());await I(e)}catch(o){switch(o.code){case 4:A(".js-u2f-registered-error");break;case 5:A(".js-u2f-timeout-error");break;default:A(".js-u2f-other-error")}}}function $(){y()?async function(){x()}():x()}function C(e,t){n(e,".js-add-new-blocked-user",HTMLButtonElement).disabled=!t}o("selectmenu:selected",".js-repo-access-team-select",function(e){let t=e.currentTarget;const s=n(t,".js-repo-access-team-select-option.selected").getAttribute("data-team-id")||"",o=n(l(t,".js-repo-access-group"),".js-add-repo-access-field",HTMLInputElement);o.value=s,u(o.form,"null.js:120"),i(o.form)}),a(".js-add-repo-access-form",async function(e,t){w();const s=(await t.json()).json;let o;const a=l(e,".js-repo-access-group");o="collaborators"===a.id?a.querySelector(".js-repo-access-list-invites"):a.querySelector(".js-repo-access-list");const r=e.querySelector(".js-add-repo-access-field");if(r instanceof HTMLInputElement){const e=r.value;r.value="","teams"===a.id&&function(e){const t=document.querySelector(".js-repo-access-team-select");if(t){let s=0;for(const n of t.querySelectorAll(".js-repo-access-team-select-option"))e===n.getAttribute("data-team-id")&&(n.classList.add("has-access"),n.classList.remove("selected")),n.classList.contains("has-access")||s++;0===s&&l(t,".js-repo-access-group").classList.add("no-form")}}(e)}if(s.error)k(s.error,a);else{if(function(){const e=document.getElementById("collaborators");e&&(n(e,".js-add-new-collab",HTMLButtonElement).disabled=!0)}(),function(){const e=document.querySelector("#teams .js-add-new-collab");e instanceof HTMLButtonElement&&(e.disabled=!0)}(),(()=>{const e=document.querySelector(".js-repo-filled-seats"),t=document.querySelector(".js-repo-access-progress");if(!e||!t)return;const s=e.getAttribute("data-filled-seats"),n=e.getAttribute("data-seats");if(!s||!n)return;const o=parseInt(s)+1,c=parseFloat(n);e.textContent=o.toString(),e.setAttribute("data-filled-seats",o.toString()),t.style.width=`${o/c*100}%`})(),o){o.insertAdjacentHTML("beforeend",s.html);const e=c(o,".js-repo-access-entry");n(e[e.length-1],"a").focus()}if(T(a),s.seats||0===s.seats){const e=1===s.seats?"seat":"seats",t=document.getElementById("available-seats");t&&(t.innerHTML=`${s.seats} ${e}`)}}}),a(".js-remove-repo-access-form",async function(e,t){if(e.hasAttribute("data-skip-remote"))return;try{await t.text()}catch(o){return void k(e.getAttribute("data-error-message")||"",l(e,".js-repo-access-group"))}w();const s=l(e,".js-repo-access-entry"),n=l(e,".js-repo-access-group");"teams"===n.id&&function(e){const t=document.querySelector(".js-repo-access-team-select");if(t){const s=t.querySelector(`[data-team-id='${e}']`);s&&s.classList.remove("has-access"),l(t,".js-repo-access-group").classList.remove("no-form")}}(s.getAttribute("data-team-id")||""),s.remove(),T(n)}),o("change","input.js-repo-data-opt-in",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:17");const s=l(t,".js-repo-data-services"),n=t.checked;for(const o of s.querySelectorAll(".js-repo-data-options"))o.classList.toggle("active",n);for(const o of s.querySelectorAll(".js-repo-data-option"))o.toggleAttribute("disabled",!n),n&&o.removeAttribute("checked")}),o("change",".js-repo-features-form input[type=checkbox]",function(e){let t=e.currentTarget;const s=l(t,".js-repo-option"),o=n(s,".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")}),o("change",".js-repo-actions-settings input[type=radio]",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:42");const s=t.form;u(s,"null.js:45");for(const n of s.querySelectorAll(".js-actions-status-indicator"))n.classList.remove("status-indicator-success","status-indicator-failed","status-indicator-loading");const o=l(t,".js-actions-option"),c=n(o,".js-actions-status-indicator");c.classList.remove("status-indicator-success","status-indicator-failed"),c.classList.add("status-indicator-loading")}),a(".js-repo-features-form",async function(e,t){let s;try{s=await t.html()}catch(o){for(const t of c(e,".status-indicator-loading")){t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-failed");const e=l(t,".js-repo-option"),s=n(e,"input[type=checkbox]",HTMLInputElement);s.checked=!s.checked}return}for(const n of c(e,".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success");n(document,".js-repo-nav").replaceWith(s.html)}),o("change",".js-merge-features-form input[type=checkbox]",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:81");const s=t.form;u(s,"null.js:84");for(const n of s.querySelectorAll(".errored"))n.classList.remove("errored");const o=l(t,".js-repo-option"),c=n(o,".js-status-indicator");c.classList.remove("status-indicator-success","status-indicator-failed"),c.classList.add("status-indicator-loading")}),a(".js-merge-features-form",async function(e,t){try{await t.text()}catch(s){for(const t of e.querySelectorAll(".js-select-one-warning"))t.classList.remove("d-none");for(const t of e.querySelectorAll(".status-indicator-loading")){t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-failed");const e=l(t,".js-repo-option");e.classList.add("errored");const s=n(e,"input[type=checkbox]",HTMLInputElement);s.checked=!s.checked}for(const t of e.querySelectorAll(".status-indicator-success"))t.classList.remove("status-indicator-success");return}for(const n of e.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of e.querySelectorAll(".js-select-one-warning"))n.classList.add("d-none");for(const n of e.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")}),o("change","input.js-required-status-toggle",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:145");const s=l(t,".js-protected-branch-settings");n(s,".js-required-statuses").classList.toggle("d-none",!t.checked)}),o("change","input.js-required-status-checkbox",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:153");const s=l(t,".js-protected-branches-item");n(s,".js-required-status-badge").classList.toggle("d-none",!t.checked)}),o("change",".js-authorized-branch-pushers-toggle, input.js-authorized-review-dismisser-toggle",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:164");const s=l(t,".js-protected-branch-options"),o=n(s,".js-authorized-pushers");o.classList.toggle("d-none",!t.checked),n(o,".js-add-protected-branch-user-or-team input",HTMLInputElement).focus()}),o("change",".js-protected-branch-include-admin-toggle",function(e){let t=e.currentTarget;const s=l(t,".js-protected-branch-settings").querySelectorAll(".js-protected-branch-admin-permission");for(const n of s)n.classList.toggle("d-none"),n.classList.toggle("active",!n.classList.contains("d-none"))}),o("auto-complete-change",".js-add-protected-branch-user-or-team",async function(e){let t=e.target;u(t instanceof m,"null.js:196");const s=t.value;if(!s)return;t.value="";const o=l(t,".js-protected-branch-options"),c=n(o,".js-authorized-users-and-teams"),a=c.querySelector(`div[data-user-or-team-name='${s}']`);if(a)return void n(a,".js-protected-branch-pusher").classList.add("user-already-added");const i=r(t,"data-add-url"),f=new URL(i,window.location.origin),g=new URLSearchParams(f.search.slice(1));g.append("item",s),f.search=g.toString(),c.append(await d(document,f)),E(o)}),o("click",".js-remove-authorized-user-or-team",function(e){let t=e.currentTarget;const s=l(t,".js-protected-branch-options");l(t,".js-authorized-user-or-team").remove(),E(s)}),s("#pages-cname-field",{constructor:HTMLInputElement,add(e){f(e,function(){n(document,".js-pages-cname-save-btn",HTMLButtonElement).disabled=e.value===e.defaultValue})}}),s(".js-pages-https-status-form",{constructor:HTMLFormElement,add(e){const t=new Request(e.action,{method:e.method,body:new FormData(e)});(async()=>{try{const n=await d(document,t);e.replaceWith(n)}catch(s){if(!s.response||404!==s.response.status)throw s}})()}}),o("click",".js-repo-team-suggestions-view-all",async function(e){const t=l(e.currentTarget,"ul"),s=r(e.currentTarget,"data-url"),o=c(document,".js-repo-toggle-team:checked",HTMLInputElement).map(e=>e.value),a=await d(document,s);t.innerHTML="",t.append(a);for(const c of o)n(t,`.js-repo-toggle-team[value="${c}"]`,HTMLInputElement).checked=!0}),g(".js-synced-repo-owner-input",function(e){const t=e.target;u(t instanceof HTMLInputElement,"null.js:25");const s=t.getAttribute("data-sync");if(!s)return;const n=document.querySelectorAll(`[data-sync-with="${s}"]`);for(const o of n)o.textContent=t.value}),a(".js-saved-reply-delete",async function(e,t){await t.text();const s=e.closest(".js-saved-reply-container");u(s,"null.js:10");const n=s.querySelectorAll(".js-saved-reply-list-item").length;s.classList.toggle("has-replies",n>1);const o=e.closest(".js-saved-reply-list-item");u(o,"null.js:16"),o.remove()}),a(".js-u2f-registration-delete",async function(e,t){const s=l(e,".js-u2f-registration");s.classList.add("is-sending"),S((await t.json()).json),s.remove()}),o("click",".js-add-u2f-registration-link",function(){const e=n(document,".js-new-u2f-registration");e.classList.add("is-active"),e.classList.remove("is-showing-error"),n(document,".js-u2f-registration-nickname-field",HTMLInputElement).focus()}),o("click",".js-u2f-register-retry",function(){$()}),o("submit",".js-add-u2f-registration-form",function(e){e.preventDefault(),$()}),s(".js-u2f-box",function(e){e.classList.toggle("available",b())}),s(".js-block-users-form",function(e){C(e,!1)}),a(".js-block-users-form",async function(e,t){const s=await t.html(),o=n(document,".js-user-block-settings-list"),c=n(o,".js-blocked-list"),a=n(o,".js-user-block-blank-slate");C(e,!1);const r=n(e,".js-add-blocked-user-field",HTMLInputElement);v(r,""),a.hidden=!0,c.hidden=!1,c.prepend(s.html)}),o("auto-complete-change",".js-add-blocked-user-completer",function(e){let t=e.target;u(t instanceof m,"null.js:39"),C(l(t,".js-block-users-form"),!!t.value)}),a(".js-user-sessions-revoke",async function(e,t){await t.text();const s=l(e,".js-user-sessions-container");if(l(e,".js-user-session").remove(),s){const e=s.querySelectorAll(".js-user-session").length;s.classList.toggle("has-active-sessions",e>0)}}),a(".js-verify-ssh-key",async function(e,t){await t.html();const s=l(e,"li");n(s,".js-unverified-user-key-notice").remove(),n(s,".js-user-key-icon").classList.remove("unverified-user-key"),e.remove()}),a(".js-leave-collaborated-repo",async function(e,t){await t.html();const s=r(e,"data-repo-id"),o=r(e,"data-owner-id");n(document,`.js-collab-repo[data-repo-id='${s}']`).remove(),document.querySelector(".js-collab-repo")||(n(document,".js-collaborated-repos-empty").hidden=!1,n(document,".js-collaborated-repos").hidden=!0);const c=document.querySelector(`.js-collab-repo-owner[data-owner-id='${o}']`);c&&(c.querySelector(".js-collab-repo")||c.remove())}),o("change",".js-notification-restrictions-confirmation-needed",function(e){let t=e.currentTarget;u(t instanceof HTMLInputElement,"null.js:10"),n(document,".js-notification-restrictions-confirm-modal").classList.toggle("d-none",!t.checked),n(document,".js-notification-restrictions-save").classList.toggle("d-none",t.checked)})}}});
//# sourceMappingURL=settings-bootstrap-b25c5b8c.js.map
